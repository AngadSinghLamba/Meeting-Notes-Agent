<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Meeting Notes Agent</title>
    <style>
      body { font-family: system-ui, sans-serif; max-width: 900px; margin: 40px auto; padding: 0 16px; }
      textarea { width: 100%; height: 180px; }
      input { width: 100%; padding: 8px; }
      button { padding: 10px 14px; cursor: pointer; }
      .card { border: 1px solid #ddd; padding: 12px; border-radius: 8px; margin-top: 16px; }
      table { width: 100%; border-collapse: collapse; }
      th, td { border-bottom: 1px solid #eee; padding: 8px; text-align: left; }
      code { background: #f6f6f6; padding: 2px 6px; border-radius: 6px; }
      pre { background: #f6f6f6; padding: 12px; border-radius: 8px; overflow: auto; }
    </style>
  </head>
  <body>
    <h1>Meeting Notes Agent</h1>

    <form method="post" action="/ui/summarize">
      <label>Meeting title</label>
      <input name="meeting_title" placeholder="Weekly sync" value="{{ meeting_title or '' }}" />

      <div style="height: 10px"></div>

      <label>Notes</label>
      <textarea name="text" placeholder="Paste meeting notes here...">{{ text or '' }}</textarea>

      <div style="height: 10px"></div>
      <button type="submit">Summarize</button>
    </form>

    {% if request_id %}
      <div class="card">
        <strong>Request id:</strong> <code>{{ request_id }}</code>
      </div>
    {% endif %}

    {% if markdown %}
      <div class="card">
        <h3>Summary (markdown)</h3>
        <pre>{{ markdown }}</pre>
      </div>
    {% endif %}

    {% if actions is not none %}
      <div class="card">
        <h3>Action items ({{ actions|length }})</h3>
        <table>
          <thead>
            <tr>
              <th>Action</th>
              <th>Owner</th>
              <th>Due</th>
              <th>Confidence</th>
            </tr>
          </thead>
          <tbody>
            {% for a in actions %}
              <tr>
                <td>{{ a.action }}</td>
                <td>{{ a.owner or "—" }}</td>
                <td>{{ a.due_date or "—" }}</td>
                <td>{{ "%.2f"|format(a.confidence) }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endif %}
  </body>
</html>
